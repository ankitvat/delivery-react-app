{"version":3,"sources":["constants/index.js","components/Loading.js","App.js","reportWebVitals.js","reducers/admin.reducers.js","reducers/driver.reducers.js","index.js"],"names":["UPDATE_DRIVER","UPDATE_ORDERS","UPDATE_ADMIN","UPDATE_ORDERS_DATA","UPDATE_ADMIN_DATA","Loading","className","Admin","lazy","Driver","App","useMediaQuery","useState","themeType","theme","createMuiTheme","palette","type","secondary","light","main","dark","contrastText","background","default","paper","id","ThemeProvider","CssBaseline","base","fallback","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","admin","window","localStorage","getItem","JSON","parse","undefined","console","log","initialState","hasOnlyDairyProducts","products","Object","entries","length","hasNoDairy","driver","store","createStore","combineReducers","setDriver","state","action","payload","setItem","stringify","orders","customers","Map","productsCollection","locations","forEach","order","subarea","area","hub","has","hubAreas","get","subareas","includes","push","set","areaData","categories","hubs","areas","order_id","customer_id","customer_name","phone_number","address_id","house_number","category","product","quantity","package_size","package_type","product_package_id","product_id","region_id","location_id","delivery_person_id","productData","total","unit","customer","name","phone","address","crateId","onlyDairy","crateData","productValue","crates","setAdmin","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a98a4940.chunk.js","sourcesContent":["// constants for driver\r\nexport const UPDATE_DRIVER = 'UPDATE_DRIVER';\r\nexport const UPDATE_ORDERS = 'UPDATE_ORDERS';\r\n\r\n// admin constants\r\nexport const UPDATE_ADMIN = 'UPDATE_ADMIN';\r\nexport const UPDATE_ORDERS_DATA = 'UPDATE_ORDERS_DATA';\r\nexport const UPDATE_ADMIN_DATA = 'UPDATE_ADMIN_DATA';\r\n","import { CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className=\"flex center middle p-10\">\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;","import React, {useState, Suspense, lazy} from 'react';\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline} from '@material-ui/core';\n\nimport './css/style.css';\nimport Loading from './components/Loading';\nconst Admin = lazy(() => import('./containers/Admin.jsx'));\nconst Driver = lazy(() => import('./containers/Driver.jsx'));\n\nfunction App() {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  let [themeType = 'light', setTheme] = useState(prefersDarkMode ? 'light' : 'light');\n\n  const theme = createMuiTheme({\n    palette: {\n      type: themeType,\n      // primary: colors.green[400],\n      secondary: {\n        light: '#ff4081',\n        main: '#f50057',\n        dark: '#c51162',\n        contrastText: '#fff'\n      },\n      background: {\n        default: themeType === 'dark' ? '#232323': '#fff',\n        paper: themeType === 'dark' ? '#161616': '#fff'\n      },\n    },\n  });\n\n  return (\n    <div id=\"app\">\n      <ThemeProvider theme={theme}>\n        <CssBaseline /> \n        <Router base={'delivery-react-app'}>\n          <main>\n            <Suspense fallback={<Loading />}>\n              <Switch>\n                <Route \n                  path=\"/admin\"\n                  component={Admin} \n                />\n                <Route \n                  path=\"/\"\n                  component={Driver} \n                />\n              </Switch>\n            </Suspense>\n          </main>\n        </Router>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {UPDATE_ADMIN, UPDATE_ORDERS_DATA, UPDATE_ADMIN_DATA} from '../constants/index';\r\n\r\nlet admin = window.localStorage.getItem('admin');\r\nif(admin) {\r\n  admin = JSON.parse(admin);\r\n} else {\r\n  admin = undefined;\r\n}\r\nconsole.log(admin);\r\nconst initialState = {\r\n  admin\r\n}\r\n\r\nfunction hasOnlyDairyProducts(products) {\r\n  if('Dairy' in products && Object.entries(products).length === 1) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction hasNoDairy(products) {\r\n  if(!('Dairy' in products)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport const setAdmin = (state = initialState, action = {}) => {\r\n  switch(action.type) {\r\n    case UPDATE_ADMIN:\r\n      let admin = action.payload;\r\n      window.localStorage.setItem('admin', JSON.stringify(admin));\r\n      return { ...state, admin}\r\n    case UPDATE_ADMIN_DATA:\r\n      // let {customers, areas, subareas, categories, hubs, orders} = action.payload;\r\n      return { \r\n        ...state,\r\n        ...action.payload\r\n      }\r\n\r\n    case UPDATE_ORDERS_DATA:\r\n\r\n      let orders = action.payload;\r\n      let customers = new Map();\r\n      let productsCollection = new Map();\r\n      let locations = new Map();\r\n      /* \r\n      locations = {\r\n        \"Gurgaon\": {\r\n          \"Sector 69\": [\r\n            \"Tulip White\"\r\n          ]\r\n        },\r\n        \"South Delhi\": {\r\n\r\n        }\r\n      }\r\n      */\r\n      orders.forEach(order => {\r\n        let { subarea, area, hub } = order;\r\n        if(locations.has(hub)) {\r\n          let hubAreas = locations.get(hub);\r\n          if(hubAreas.has(area)) {\r\n            let subareas = hubAreas.get(area);\r\n            if(!subareas.includes(subarea)) {\r\n              subareas.push(subarea);\r\n            }\r\n            hubAreas.set(area, subareas);\r\n            locations.set(hub, hubAreas);\r\n          } else {\r\n            let areaData = [subarea];\r\n            hubAreas.set(area, areaData);\r\n            locations.set(hub, hubAreas);\r\n          }\r\n        } else {\r\n          let hubAreas = new Map();\r\n          hubAreas.set(area, [subarea]);\r\n          locations.set(hub, hubAreas)\r\n        }\r\n      });\r\n\r\n      // console.log(locations);\r\n\r\n      let categories = [];\r\n      let hubs = [];\r\n      let areas = [];\r\n      let subareas = [];\r\n      let products = {};\r\n\r\n      orders.forEach(order => {\r\n        let { \r\n          order_id, \r\n          customer_id, customer_name, phone_number, \r\n          address_id, house_number, subarea, area, hub,\r\n          category, product, quantity,\r\n          package_size, package_type, product_package_id, product_id, \r\n          region_id, location_id, delivery_person_id\r\n        } = order;\r\n\r\n        if(delivery_person_id) {\r\n          // console.log(order);\r\n        }\r\n        let productData = {\r\n          product,\r\n          product_id,\r\n          product_package_id,\r\n          package_size,\r\n          quantity,\r\n          total: package_size * quantity,\r\n          unit: package_type\r\n        }\r\n        \r\n        if(categories.includes(category) === false) {\r\n          categories.push(category);\r\n        }\r\n        if(!(product_id in products)) {\r\n          products[product_id] = product;\r\n        }\r\n\r\n        if(customers.has(customer_id)) {\r\n          let customer = customers.get(customer_id);\r\n          let {products} = customer;\r\n          \r\n          if(category in products) {\r\n            products[category].push(productData);\r\n          } else {\r\n            products[category] = [\r\n              productData\r\n            ]\r\n          }\r\n\r\n          customer.products = products;\r\n        } else {\r\n          \r\n          if(areas.includes(area) === false) {\r\n            areas.push(area);\r\n          }\r\n          if(subareas.includes(subarea) === false) {\r\n            subareas.push(subarea);\r\n          }\r\n          if(hubs.includes(hub) === false) {\r\n            hubs.push(hub);\r\n          }\r\n\r\n          let customer = {\r\n            name: customer_name,\r\n            phone: phone_number,\r\n            order_id,\r\n            address: {\r\n              address_id,\r\n              house_number, subarea,\r\n              area, hub,\r\n              region_id, location_id\r\n            },\r\n            products: {\r\n              [category]: [productData]\r\n            },\r\n            delivery_person_id\r\n          }\r\n          customers.set(customer_id, customer);\r\n        }\r\n      });\r\n\r\n      let crateId = 1;\r\n      for(const customer of customers) {\r\n        const {products} = customer[1];\r\n        if(hasOnlyDairyProducts(products)) {\r\n          customer[1].onlyDairy = true;\r\n        } else {\r\n          customer[1].onlyDairy = false;\r\n          customer[1].crateId = crateId;\r\n          crateId++;\r\n        }\r\n        \r\n        if(hasNoDairy(products)) {\r\n          customer[1].hasNoDairy = true;\r\n        } else {\r\n          customer[1].hasNoDairy = false;\r\n        }\r\n      }\r\n\r\n      orders.forEach(order => {\r\n        let { \r\n          customer_id, \r\n          category, product, quantity,\r\n          package_size, package_type, product_id\r\n        } = order;\r\n\r\n        if(category !== 'Dairy') {\r\n          \r\n          let crateData = {\r\n            quantity,\r\n            total: package_size * quantity,\r\n            crateId: customers.get(customer_id).crateId\r\n          }\r\n          if(productsCollection.has(product_id)) {\r\n            let productValue = productsCollection.get(product_id);\r\n            let {crates} = productValue;\r\n            crates.push(crateData);\r\n\r\n            productValue.crates = crates;\r\n          } else {\r\n            let productData = {\r\n              package_size,\r\n              product,\r\n              unit: package_type,\r\n              crates: [crateData]\r\n            }\r\n            productsCollection.set(product_id, productData);\r\n          }\r\n        }\r\n      })\r\n      \r\n      return {...state, customers, locations, productsCollection, products, areas, subareas, categories, hubs, orders};\r\n    default:\r\n      return state;\r\n  }\r\n}","import {UPDATE_DRIVER, UPDATE_ORDERS} from '../constants/index';\r\n\r\nlet driver = window.localStorage.getItem('driver');\r\nif(driver) {\r\n  driver = JSON.parse(driver);\r\n} else {\r\n  driver = undefined;\r\n}\r\nconst initialState = {\r\n  driver\r\n}\r\n\r\nfunction hasOnlyDairyProducts(products) {\r\n  if('Dairy' in products && Object.entries(products).length === 1) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction hasNoDairy(products) {\r\n  if(!('Dairy' in products)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport const setDriver = (state = initialState, action = {}) => {\r\n  switch(action.type) {\r\n    case UPDATE_DRIVER:\r\n      let driver = action.payload;\r\n      window.localStorage.setItem('driver', JSON.stringify(driver));\r\n      return { ...state, driver}\r\n\r\n    case UPDATE_ORDERS:\r\n\r\n      let orders = action.payload;\r\n      let customers = new Map();\r\n      let productsCollection = new Map();\r\n      let locations = new Map();\r\n      /* \r\n      locations = {\r\n        \"Gurgaon\": {\r\n          \"Sector 69\": [\r\n            \"Tulip White\"\r\n          ]\r\n        },\r\n        \"South Delhi\": {\r\n\r\n        }\r\n      }\r\n      */\r\n      orders.forEach(order => {\r\n        let { subarea, area, hub } = order;\r\n        if(locations.has(hub)) {\r\n          let hubAreas = locations.get(hub);\r\n          if(hubAreas.has(area)) {\r\n            let subareas = hubAreas.get(area);\r\n            if(!subareas.includes(subarea)) {\r\n              subareas.push(subarea);\r\n            }\r\n            hubAreas.set(area, subareas);\r\n            locations.set(hub, hubAreas);\r\n          } else {\r\n            let areaData = [subarea];\r\n            hubAreas.set(area, areaData);\r\n            locations.set(hub, hubAreas);\r\n          }\r\n        } else {\r\n          let hubAreas = new Map();\r\n          hubAreas.set(area, [subarea]);\r\n          locations.set(hub, hubAreas)\r\n        }\r\n      });\r\n\r\n      // console.log(locations);\r\n\r\n      let categories = [];\r\n      let hubs = [];\r\n      let areas = [];\r\n      let subareas = [];\r\n      let products = {};\r\n\r\n      orders.forEach(order => {\r\n        let { \r\n          order_id, \r\n          customer_id, customer_name, phone_number, \r\n          address_id, house_number, subarea, area, hub,\r\n          category, product, quantity,\r\n          package_size, package_type, product_package_id, product_id, \r\n          region_id, location_id, delivery_person_id\r\n        } = order;\r\n\r\n        if(delivery_person_id) {\r\n          // console.log(order);\r\n        }\r\n        let productData = {\r\n          product,\r\n          product_id,\r\n          product_package_id,\r\n          package_size,\r\n          quantity,\r\n          total: package_size * quantity,\r\n          unit: package_type\r\n        }\r\n        \r\n        if(categories.includes(category) === false) {\r\n          categories.push(category);\r\n        }\r\n        if(!(product_id in products)) {\r\n          products[product_id] = product;\r\n        }\r\n\r\n        if(customers.has(customer_id)) {\r\n          let customer = customers.get(customer_id);\r\n          let {products} = customer;\r\n          \r\n          if(category in products) {\r\n            products[category].push(productData);\r\n          } else {\r\n            products[category] = [\r\n              productData\r\n            ]\r\n          }\r\n\r\n          customer.products = products;\r\n        } else {\r\n          \r\n          if(areas.includes(area) === false) {\r\n            areas.push(area);\r\n          }\r\n          if(subareas.includes(subarea) === false) {\r\n            subareas.push(subarea);\r\n          }\r\n          if(hubs.includes(hub) === false) {\r\n            hubs.push(hub);\r\n          }\r\n\r\n          let customer = {\r\n            name: customer_name,\r\n            phone: phone_number,\r\n            order_id,\r\n            address: {\r\n              address_id,\r\n              house_number, subarea,\r\n              area, hub,\r\n              region_id, location_id\r\n            },\r\n            products: {\r\n              [category]: [productData]\r\n            },\r\n            delivery_person_id\r\n          }\r\n          customers.set(customer_id, customer);\r\n        }\r\n      });\r\n\r\n      let crateId = 1;\r\n      for(const customer of customers) {\r\n        const {products} = customer[1];\r\n        if(hasOnlyDairyProducts(products)) {\r\n          customer[1].onlyDairy = true;\r\n        } else {\r\n          customer[1].onlyDairy = false;\r\n          customer[1].crateId = crateId;\r\n          crateId++;\r\n        }\r\n        \r\n        if(hasNoDairy(products)) {\r\n          customer[1].hasNoDairy = true;\r\n        } else {\r\n          customer[1].onlyDairy = false;\r\n        }\r\n      }\r\n\r\n      orders.forEach(order => {\r\n        let { \r\n          customer_id, \r\n          category, product, quantity,\r\n          package_size, package_type, product_id\r\n        } = order;\r\n\r\n        if(category !== 'Dairy') {\r\n          \r\n          let crateData = {\r\n            quantity,\r\n            total: package_size * quantity,\r\n            crateId: customers.get(customer_id).crateId\r\n          }\r\n          if(productsCollection.has(product_id)) {\r\n            let productValue = productsCollection.get(product_id);\r\n            let {crates} = productValue;\r\n            crates.push(crateData);\r\n\r\n            productValue.crates = crates;\r\n          } else {\r\n            let productData = {\r\n              package_size,\r\n              product,\r\n              unit: package_type,\r\n              crates: [crateData]\r\n            }\r\n            productsCollection.set(product_id, productData);\r\n          }\r\n        }\r\n      })\r\n      \r\n      return {...state, customers, locations, productsCollection, products, areas, subareas, categories, hubs, orders};\r\n    default:\r\n      return state;\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport {Provider} from 'react-redux';\nimport {createStore, combineReducers} from 'redux';\n\nimport {setAdmin} from './reducers/admin.reducers';\nimport {setDriver} from './reducers/driver.reducers';\n\nconst store = createStore(combineReducers({\n  setDriver,\n  setAdmin\n}));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}