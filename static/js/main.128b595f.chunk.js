(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[4],{14:function(e,r,a){"use strict";a.d(r,"c",(function(){return t})),a.d(r,"d",(function(){return i})),a.d(r,"a",(function(){return c})),a.d(r,"e",(function(){return d})),a.d(r,"b",(function(){return n}));var t="UPDATE_DRIVER",i="UPDATE_ORDERS",c="UPDATE_ADMIN",d="UPDATE_ORDERS_DATA",n="UPDATE_ADMIN_DATA"},40:function(e,r,a){"use strict";var t=a(3),i=a(68);a(0);r.a=function(){return Object(t.jsx)("div",{className:"flex center middle p-10",children:Object(t.jsx)(i.a,{})})}},60:function(e,r,a){},61:function(e,r,a){},67:function(e,r,a){"use strict";a.r(r);var t=a(3),i=a(0),c=a.n(i),d=a(22),n=a.n(d),s=(a(60),a(43)),o=a(2),u=a(52),l=a(84),p=a(85),_=(a(61),a(40)),v=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(12)]).then(a.bind(null,377))})),b=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(13)]).then(a.bind(null,378))})),y=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(6),a.e(8)]).then(a.bind(null,370))}));var h=function(){var e=Object(u.a)({palette:{secondary:{light:"#ff4081",main:"#f50057",dark:"#c51162",contrastText:"#fff"},background:{default:"#fff",paper:"#fff"}}});return Object(t.jsx)("div",{id:"app",children:Object(t.jsxs)(l.a,{theme:e,children:[Object(t.jsx)(p.a,{}),Object(t.jsx)(s.a,{base:"delivery-react-app",children:Object(t.jsx)("main",{children:Object(t.jsx)(i.Suspense,{fallback:Object(t.jsx)(_.a,{}),children:Object(t.jsxs)(o.c,{children:[Object(t.jsx)(o.a,{path:"/trace",exact:!0,component:y}),Object(t.jsx)(o.a,{path:"/admin",component:v}),Object(t.jsx)(o.a,{path:"/",component:b})]})})})})]})})},f=a(38),j=a(19),g=a(20),m=a(15),O=a(10),k=(a(42),a(14)),D=window.localStorage.getItem("admin");D=D?JSON.parse(D):void 0,console.log(D);var x={admin:D};function w(e){return"Dairy"in e&&1===Object.entries(e).length}function E(e){return!("Dairy"in e)}var M=window.localStorage.getItem("driver"),A={driver:M=M?JSON.parse(M):void 0};function I(e){return"Dairy"in e&&1===Object.entries(e).length}function S(e){return!("Dairy"in e)}var T=Object(j.c)(Object(j.b)({setDriver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case k.c:var a=r.payload;return window.localStorage.setItem("driver",JSON.stringify(a)),Object(O.a)(Object(O.a)({},e),{},{driver:a});case k.d:var t=r.payload,i=new Map,c=(new Map,new Map);t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(c.has(t)){var i=c.get(t);if(i.has(a)){var d=i.get(a);d.includes(r)||d.push(r),i.set(a,d),c.set(t,i)}else{var n=[r];i.set(a,n),c.set(t,i)}}else{var s=new Map;s.set(a,[r]),c.set(t,s)}}));var d=[],n=[],s=[],o=[],u={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.customer_id,c=e.customer_name,l=e.phone_number,p=e.address_id,_=e.house_number,v=e.subarea,b=e.area,y=e.hub,h=e.category,f=e.product,j=e.quantity,g=e.package_size,O=e.package_type,k=e.product_package_id,D=e.product_id,x=e.region_id,w=e.location_id,E=e.delivery_person_id,M={product:f,product_id:D,product_package_id:k,package_size:g,quantity:j,total:g*j,unit:O},A={driver_id:e.driver_id,deliver_date:e.deliver_date,delivery_type:e.delivery_type,proof_img:e.proof_img,complete_delivery:e.complete_delivery,order_cancel_reason:e.order_cancel_reason,boxes:e.boxes,milk_packets:e.milk_packets};if(!1===d.includes(h)&&d.push(h),D in u||(u[D]=f),i.has(t)){var I=i.get(t),S=I.products;h in S?S[h].push(M):S[h]=[M],I.products=S,I.delivery=A,I.delivered=A.deliver_date}else{!1===s.includes(b)&&s.push(b),!1===o.includes(v)&&o.push(v),!1===n.includes(y)&&n.push(y);var T={name:c,phone:l,order_id:r,crate_id:a,address:{address_id:p,house_number:_,subarea:v,area:b,hub:y,region_id:x,location_id:w},products:Object(m.a)({},h,[M]),delivery_person_id:E,delivery:A,delivered:A.deliver_date};i.set(t,T)}}));var l,p=Object(g.a)(i);try{for(p.s();!(l=p.n()).done;){var _=l.value,v=_[1].products;I(v)?_[1].onlyDairy=!0:_[1].onlyDairy=!1,S(v)?_[1].hasNoDairy=!0:_[1].onlyDairy=!1}}catch(b){p.e(b)}finally{p.f()}return Object(O.a)(Object(O.a)({},e),{},{customers:i,locations:c,areas:s,subareas:o,hubs:n,orders:t});default:return e}},setAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case k.a:var a=r.payload;return window.localStorage.setItem("admin",JSON.stringify(a)),Object(O.a)(Object(O.a)({},e),{},{admin:a});case k.b:return Object(O.a)(Object(O.a)({},e),r.payload);case k.e:var t=r.payload,i=new Map,c=new Map,d=new Map;t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(d.has(t)){var i=d.get(t);if(i.has(a)){var c=i.get(a);c.includes(r)||c.push(r),i.set(a,c),d.set(t,i)}else{var n=[r];i.set(a,n),d.set(t,i)}}else{var s=new Map;s.set(a,[r]),d.set(t,s)}}));var n=[],s=[],o=[],u=[],l={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.order_staus,c=e.order_type,d=e.TIMESTAMP,p=e.customer_id,_=e.customer_name,v=e.phone_number,b=e.address_id,y=e.house_number,h=e.subarea,f=e.area,j=e.hub,g=e.category,O=e.product,k=e.quantity,D=e.package_size,x=e.package_type,w=e.product_package_id,E=e.product_id,M=e.region_id,A=e.location_id,I=e.delivery_person_id,S={product:O,product_id:E,product_package_id:w,package_size:D,quantity:k,category:g,total:D*k,unit:x},T={driver_id:e.driver_id,deliver_date:e.deliver_date,delivery_type:e.delivery_type,proof_img:e.proof_img,complete_delivery:e.complete_delivery,order_cancel_reason:e.order_cancel_reason,boxes:e.boxes,milk_packets:e.milk_packets};if(!1===n.includes(g)&&n.push(g),E in l||(l[E]=O),i.has(p)){var P=i.get(p),N=P.products;g in N?N[g].push(S):N[g]=[S],P.products=N,P.delivery=T,P.delivered=T.deliver_date}else{!1===o.includes(f)&&o.push(f),!1===u.includes(h)&&u.push(h),!1===s.includes(j)&&s.push(j);var z={name:_,phone:v,order_id:r,crate_id:a,order_staus:t,order_type:c,TIMESTAMP:d,address:{address_id:b,house_number:y,subarea:h,area:f,hub:j,region_id:M,location_id:A},products:Object(m.a)({},g,[S]),fnvProducts:[],delivery_person_id:I,delivery:T,delivered:T.deliver_date};i.set(p,z)}}));var p,_=1,v=Object(g.a)(i);try{for(v.s();!(p=v.n()).done;){var b=p.value,y=b[1].products;w(y)?b[1].onlyDairy=!0:(b[1].onlyDairy=!1,b[1].crateId=_,_++),E(y)?b[1].hasNoDairy=!0:b[1].hasNoDairy=!1}}catch(M){v.e(M)}finally{v.f()}var h,f=Object(g.a)(i);try{for(f.s();!(h=f.n()).done;){var j=h.value,D=j[1].products;w(D)&&(j[1].crateId=_,_++)}}catch(M){f.e(M)}finally{f.f()}return t.forEach((function(e){var r=e.customer_id,a=e.category,t=e.product,d=e.quantity,n=e.package_size,s=e.package_type,o=e.product_id,u={quantity:d,total:n*d,crateId:i.get(r).crateId,crate_id:i.get(r).crate_id};if(c.has(o)){var l=c.get(o),p=l.crates;p.push(u),l.crates=p}else{var _={package_size:n,product_id:o,product:t,category:a,unit:s,crates:[u]};c.set(o,_)}})),Object(O.a)(Object(O.a)({},e),{},{customers:i,locations:d,productsCollection:c,products:l,areas:o,subareas:u,categories:n,hubs:s,orders:t});default:return e}}}));n.a.render(Object(t.jsx)(c.a.StrictMode,{children:Object(t.jsx)(f.a,{store:T,children:Object(t.jsx)(h,{})})}),document.getElementById("root"))}},[[67,5,7]]]);
//# sourceMappingURL=main.128b595f.chunk.js.map