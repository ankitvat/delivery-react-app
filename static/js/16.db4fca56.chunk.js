(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[16],{283:function(e,t,a){"use strict";a.r(t);var n=a(95),i=a(96),c=a(98),s=a(97),l=a(3),r=a(272),o=a(254),d=a(0),h=a(39),m=a(124),j=a(170),b=a.n(j);var u=a(117),p=a(15),x=a(271),O=a(267),f=a(287),g=a(273),v=a(145),y=a(168),C=a(257),M=a(70),Y=a(169),D=a(290),_=a(147),S=a.n(_),k=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t=new FormData(e.target);(0,i.props.onSubmit)(t)},i.onChange=function(e){i.setState(Object(p.a)({},e.target.name,e.target.value))},i.onDateTimeChange=function(e){i.setState(Object(p.a)({},e.target.name,e.target.value))},i.onFileChange=function(e){i.setState({pdf:e.target.value})},i.state={report_date:b()().format("YYYY-MM-DD"),milk_type:"a2",ph:7,snf:9,fat:4,sodium_content:496,mbrt:40,antibiotics1:!1,antibiotics2:!1,antibiotics3:!1,aflatoxin:!1,pdf:null,bmc_receive:b()().subtract(2,"day").format("YYYY-MM-DDTHH:MM"),bmc_dispatch:b()().subtract(2,"day").add(4,"hour").format("YYYY-MM-DDTHH:MM"),plant_receive:b()().subtract(1,"day").format("YYYY-MM-DDTHH:MM"),plant_dispatch:b()().subtract(1,"day").add(2,"hour").format("YYYY-MM-DDTHH:MM"),whs_receive:b()().subtract(10,"hour").format("YYYY-MM-DDTHH:MM"),whs_dispatch:b()().subtract(8,"hour").format("YYYY-MM-DDTHH:MM")},i}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.report_date,n=t.milk_type,i=t.ph,c=t.snf,s=t.fat,r=t.sodium_content,o=t.mbrt,d=t.antibiotics1,h=t.antibiotics2,m=t.antibiotics3,j=t.aflatoxin,b=t.bmc_receive,u=t.bmc_dispatch,p=t.plant_receive,_=t.plant_dispatch,k=t.whs_receive,T=t.whs_dispatch,W=t.pdf,H=this.props.loading,q=null;if(W){var N=W.split("\\");q=N[N.length-1]}return console.log(this.state),Object(l.jsx)("div",{id:"report-form",className:"flex column middle",children:Object(l.jsxs)("form",{id:"milk-report-form",onSubmit:this.onSubmit,children:[Object(l.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(O.a,{fullWidth:!0,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"Report Date *",type:"date",value:a,name:"report_date",onChange:this.onDateTimeChange})})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsxs)(O.a,{fullWidth:!0,children:[Object(l.jsx)(D.a,{id:"milk_type",children:"Milk Type *"}),Object(l.jsxs)(g.a,{labelId:"milk_type",fullWidth:!0,name:"milk_type",value:n,onChange:function(t){e.setState({milk_type:t.target.value})},children:[Object(l.jsx)(Y.a,{value:"a2",children:"A2"}),Object(l.jsx)(Y.a,{value:"mix",children:"Mix"})]})]})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"pH *",name:"ph",onChange:this.onChange,type:"number",value:i})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"FAT *",name:"fat",value:s,type:"number",onChange:this.onChange})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"SNF *",name:"snf",value:c,type:"number",onChange:this.onChange})})]}),Object(l.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"Sodium Content *",name:"sodium_content",value:r,type:"number",onChange:this.onChange})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:2,children:Object(l.jsx)(f.a,{fullWidth:!0,label:"MBRT *",name:"mbrt",type:"number",value:o,onChange:this.onChange})}),Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"BMC Received"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:b,name:"bmc_receive"})]}),Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"BMC Dispatched"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:u,name:"bmc_dispatch"})]})]}),Object(l.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"Plant Received"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:p,name:"plant_receive"})]}),Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"Plant Dispatched"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:_,name:"plant_dispatch"})]}),Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"WHS Received"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:k,name:"whs_receive"})]}),Object(l.jsxs)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:[Object(l.jsx)(D.a,{className:"required",children:"WHS Dispatched"}),Object(l.jsx)(f.a,{fullWidth:!0,type:"datetime-local",required:!0,onChange:this.onDateTimeChange,value:T,name:"whs_dispatch"})]})]}),Object(l.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:Object(l.jsx)(v.a,{control:Object(l.jsx)(y.a,{disabled:!0,checked:d,onChange:function(t,a){return e.setState({antibiotics1:a})},color:"primary"}),label:"Antibiotics (B & T) *"})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:Object(l.jsx)(v.a,{control:Object(l.jsx)(y.a,{disabled:!0,checked:h,onChange:function(t,a){return e.setState({antibiotics2:a})},color:"primary"}),label:"Antibiotics (Chloramphenicol) *"})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:Object(l.jsx)(v.a,{control:Object(l.jsx)(y.a,{disabled:!0,checked:m,onChange:function(t,a){return e.setState({antibiotics3:a})},color:"primary"}),label:"Antibiotics (Sulphonamide) *"})}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,lg:3,children:Object(l.jsx)(v.a,{control:Object(l.jsx)(y.a,{disabled:!0,checked:j,onChange:function(t,a){return e.setState({aflatoxin:a})},color:"primary"}),label:"Aflatoxin M1 *"})})]}),Object(l.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(l.jsxs)(x.a,{item:!0,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"file",id:"milk-report-file-input",className:"file-input",name:"pdf",onChange:this.onChange}),Object(l.jsx)("label",{className:"file",htmlFor:"milk-report-file-input",children:Object(l.jsxs)("div",{className:"flex middle",children:[Object(l.jsx)("div",{className:"icon",children:Object(l.jsx)(S.a,{})}),"Upload Report"]})})]}),q]}),Object(l.jsx)(x.a,{item:!0,children:Object(l.jsx)(C.a,{type:"submit",color:"primary",variant:"contained",disabled:H,startIcon:H?Object(l.jsx)(M.a,{size:12}):null,children:"Submit"})}),Object(l.jsx)(x.a,{item:!0,children:Object(l.jsx)(C.a,{color:"primary",children:"Cancel"})})]})]})})}}]),a}(d.Component);var T=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).onSubmit=function(e){i.setState({loading:!0}),Object(u.a)(e).then((function(e){console.log(e),i.setState({loading:!1}),alert("Done")})).catch((function(e){e.response&&400===e.response.status&&alert(e.response.data),console.log(e),i.setState({loading:!1})}))},i.state={report:null,loading:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a2",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b()().format("YYYY-MM-DD");t=b()(t).format("YYYY-MM-DD");var a="".concat(m.a,"/misc/getReport?report_date=").concat(t,"&type=").concat(e);return Object(m.b)({url:a,method:"get",headers:{"Content-Type":"application/json"}})})().then((function(t){console.log(t.data),e.setState({report:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.loading;e.report;return Object(l.jsxs)("div",{children:[Object(l.jsx)(r.a,{m:1,children:Object(l.jsx)(o.a,{variant:"h4",children:"Add Milk Report"})}),Object(l.jsx)(r.a,{m:1,children:Object(l.jsx)(k,{onSubmit:this.onSubmit,loading:t})})]})}}]),a}(d.Component);t.default=Object(h.b)((function(e){return{}}))(T)}}]);
//# sourceMappingURL=16.db4fca56.chunk.js.map