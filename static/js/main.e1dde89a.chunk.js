(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[4],{14:function(e,r,a){"use strict";a.d(r,"c",(function(){return t})),a.d(r,"d",(function(){return i})),a.d(r,"a",(function(){return n})),a.d(r,"e",(function(){return c})),a.d(r,"b",(function(){return d}));var t="UPDATE_DRIVER",i="UPDATE_ORDERS",n="UPDATE_ADMIN",c="UPDATE_ORDERS_DATA",d="UPDATE_ADMIN_DATA"},41:function(e,r,a){"use strict";var t=a(3),i=a(70);a(0);r.a=function(){return Object(t.jsx)("div",{className:"flex center middle p-10",children:Object(t.jsx)(i.a,{})})}},57:function(e,r,a){},63:function(e,r,a){},69:function(e,r,a){"use strict";a.r(r);var t=a(3),i=a(0),n=a.n(i),c=a(22),d=a.n(c),s=(a(63),a(43)),o=a(2),u=a(54),l=a(86),p=a(87),_=(a(57),a(41)),v=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(8),a.e(15)]).then(a.bind(null,303))})),b=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(16)]).then(a.bind(null,304))})),h=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(3),a.e(9),a.e(11)]).then(a.bind(null,289))}));var y=function(){var e=Object(u.a)({palette:{secondary:{light:"#ff4081",main:"#f50057",dark:"#c51162",contrastText:"#fff"},background:{default:"#fff",paper:"#fff"}}});return Object(t.jsx)("div",{id:"app",children:Object(t.jsxs)(l.a,{theme:e,children:[Object(t.jsx)(p.a,{}),Object(t.jsx)(s.a,{base:"delivery-react-app",children:Object(t.jsx)("main",{children:Object(t.jsx)(i.Suspense,{fallback:Object(t.jsx)(_.a,{}),children:Object(t.jsxs)(o.c,{children:[Object(t.jsx)(o.a,{path:"/trace",exact:!0,component:h}),Object(t.jsx)(o.a,{path:"/admin",component:v}),Object(t.jsx)(o.a,{path:"/",component:b})]})})})})]})})},f=function(e){e&&e instanceof Function&&a.e(22).then(a.bind(null,291)).then((function(r){var a=r.getCLS,t=r.getFID,i=r.getFCP,n=r.getLCP,c=r.getTTFB;a(e),t(e),i(e),n(e),c(e)}))},g=a(39),m=a(20),j=a(18),O=a(15),k=a(10),x=(a(44),a(14)),D=window.localStorage.getItem("admin");D=D?JSON.parse(D):void 0,console.log(D);var w={admin:D};function E(e){return"Dairy"in e&&1===Object.entries(e).length}function I(e){return!("Dairy"in e)}var M=window.localStorage.getItem("driver"),S={driver:M=M?JSON.parse(M):void 0};function A(e){return"Dairy"in e&&1===Object.entries(e).length}function T(e){return!("Dairy"in e)}var P=Object(m.c)(Object(m.b)({setDriver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case x.c:var a=r.payload;return window.localStorage.setItem("driver",JSON.stringify(a)),Object(k.a)(Object(k.a)({},e),{},{driver:a});case x.d:var t=r.payload,i=new Map,n=(new Map,new Map);t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(n.has(t)){var i=n.get(t);if(i.has(a)){var c=i.get(a);c.includes(r)||c.push(r),i.set(a,c),n.set(t,i)}else{var d=[r];i.set(a,d),n.set(t,i)}}else{var s=new Map;s.set(a,[r]),n.set(t,s)}}));var c=[],d=[],s=[],o=[],u={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.customer_id,n=e.customer_name,l=e.phone_number,p=e.address_id,_=e.house_number,v=e.subarea,b=e.area,h=e.hub,y=e.category,f=e.product,g=e.quantity,m=e.package_size,j=e.package_type,k=e.product_package_id,x=e.product_id,D=e.region_id,w=e.location_id,E=e.delivery_person_id,I={product:f,product_id:x,product_package_id:k,package_size:m,quantity:g,total:m*g,unit:j},M={driver_id:e.driver_id,deliver_date:e.deliver_date,delivery_type:e.delivery_type,proof_img:e.proof_img,complete_delivery:e.complete_delivery,order_cancel_reason:e.order_cancel_reason,boxes:e.boxes,milk_packets:e.milk_packets};if(!1===c.includes(y)&&c.push(y),x in u||(u[x]=f),i.has(t)){var S=i.get(t),A=S.products;y in A?A[y].push(I):A[y]=[I],S.products=A,S.delivery=M,S.delivered=M.deliver_date}else{!1===s.includes(b)&&s.push(b),!1===o.includes(v)&&o.push(v),!1===d.includes(h)&&d.push(h);var T={name:n,phone:l,order_id:r,crate_id:a,address:{address_id:p,house_number:_,subarea:v,area:b,hub:h,region_id:D,location_id:w},products:Object(O.a)({},y,[I]),delivery_person_id:E,delivery:M,delivered:M.deliver_date};i.set(t,T)}}));var l,p=Object(j.a)(i);try{for(p.s();!(l=p.n()).done;){var _=l.value,v=_[1].products;A(v)?_[1].onlyDairy=!0:_[1].onlyDairy=!1,T(v)?_[1].hasNoDairy=!0:_[1].onlyDairy=!1}}catch(b){p.e(b)}finally{p.f()}return Object(k.a)(Object(k.a)({},e),{},{customers:i,locations:n,areas:s,subareas:o,hubs:d,orders:t});default:return e}},setAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case x.a:var a=r.payload;return window.localStorage.setItem("admin",JSON.stringify(a)),Object(k.a)(Object(k.a)({},e),{},{admin:a});case x.b:return Object(k.a)(Object(k.a)({},e),r.payload);case x.e:var t=r.payload,i=new Map,n=new Map,c=new Map;t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(c.has(t)){var i=c.get(t);if(i.has(a)){var n=i.get(a);n.includes(r)||n.push(r),i.set(a,n),c.set(t,i)}else{var d=[r];i.set(a,d),c.set(t,i)}}else{var s=new Map;s.set(a,[r]),c.set(t,s)}}));var d=[],s=[],o=[],u=[],l={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.order_staus,n=e.order_type,c=e.TIMESTAMP,p=e.last_update_on,_=e.crates,v=e.remark,b=e.small_boxes,h=e.large_boxes,y=e.customer_id,f=e.customer_name,g=e.phone_number,m=e.address_id,j=e.house_number,k=e.subarea,x=e.area,D=e.hub,w=e.category,E=e.product,I=e.quantity,M=e.package_size,S=e.package_type,A=e.product_package_id,T=e.product_id,P=e.region_id,N=e.location_id,z=e.delivery_person_id,q={product:E,product_id:T,product_package_id:A,package_size:M,quantity:I,category:w,total:M*I,unit:S},J={driver_id:e.driver_id,deliver_date:e.deliver_date,delivery_type:e.delivery_type,proof_img:e.proof_img,complete_delivery:e.complete_delivery,order_cancel_reason:e.order_cancel_reason,boxes:e.boxes,milk_packets:e.milk_packets};if(!1===d.includes(w)&&d.push(w),T in l||(l[T]=E),i.has(y)){var R=i.get(y),U=R.products;w in U?U[w].push(q):U[w]=[q],R.products=U,R.delivery=J,R.delivered=J.deliver_date}else{!1===o.includes(x)&&o.push(x),!1===u.includes(k)&&u.push(k),!1===s.includes(D)&&s.push(D);var C={name:f,phone:g,order_id:r,crate_id:a,order_staus:t,order_type:n,TIMESTAMP:c,last_update_on:p,crates:_,remark:v,small_boxes:b,large_boxes:h,address:{address_id:m,house_number:j,subarea:k,area:x,hub:D,region_id:P,location_id:N},products:Object(O.a)({},w,[q]),fnvProducts:[],delivery_person_id:z,delivery:J,delivered:J.deliver_date};i.set(y,C)}}));var p,_=1,v=Object(j.a)(i);try{for(v.s();!(p=v.n()).done;){var b=p.value,h=b[1].products;E(h)?b[1].onlyDairy=!0:(b[1].onlyDairy=!1,b[1].crateId=_,_++),I(h)?b[1].hasNoDairy=!0:b[1].hasNoDairy=!1}}catch(D){v.e(D)}finally{v.f()}var y,f=Object(j.a)(i);try{for(f.s();!(y=f.n()).done;){var g=y.value,m=g[1].products;E(m)&&(g[1].crateId=_,_++)}}catch(D){f.e(D)}finally{f.f()}return t.forEach((function(e){var r=e.customer_id,a=e.category,t=e.product,c=e.quantity,d=e.package_size,s=e.package_type,o=e.product_id,u={quantity:c,total:d*c,crateId:i.get(r).crateId,crate_id:i.get(r).crate_id};if(n.has(o)){var l=n.get(o),p=l.crates;p.push(u),l.crates=p}else{var _={package_size:d,product_id:o,product:t,category:a,unit:s,crates:[u]};n.set(o,_)}})),Object(k.a)(Object(k.a)({},e),{},{customers:i,locations:c,productsCollection:n,products:l,areas:o,subareas:u,categories:d,hubs:s,orders:t});default:return e}}}));d.a.render(Object(t.jsx)(n.a.StrictMode,{children:Object(t.jsx)(g.a,{store:P,children:Object(t.jsx)(y,{})})}),document.getElementById("root")),f()}},[[69,5,6]]]);
//# sourceMappingURL=main.e1dde89a.chunk.js.map