(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[14],{252:function(e,a,r){"use strict";r.r(a);var t=r(91),l=r(92),n=r(95),s=r(94),c=r(10),i=r(4),d=r(0),o=r.n(d),u=r(37),h=r(242),b=r(257),j=r(197),v=r(236),f=r(189),O=r(190),x=r(254),p=r(229),m=r(39),y=r(135),g=r(134),w=r(2),A=r(119),C=r.n(A),S=r(191),D=r.n(S);var k=o.a.memo(Object(w.f)((function(e){var a=e.data,r=e.history;console.log(r);var t=[{name:"Name",selector:"name",sortable:!0,width:"200px"},{name:"Phone",selector:"phone",sortable:!0,width:"140px",cell:function(e,a){var r=e.phone;return Object(i.jsx)("div",{children:Object(i.jsxs)("a",{href:"tel:+91".concat(r),className:"flex middle",children:[Object(i.jsx)(D.a,{})," ",r]})})}},{name:"Hub",sortable:!0,selector:"address.hub",width:"100px",cell:function(e,a){return e.address.hub}},{name:"Region",sortable:!0,selector:"address.area",width:"140px",cell:function(e,a){return e.address.area}},{name:"Locality",sortable:!0,selector:"address.subarea",width:"150px",cell:function(e,a){return e.address.subarea}},{name:"House",selector:"address.house",width:"200px",cell:function(e,a){return e.address.house_number}}];return console.log("Rerendering Table"),Object(i.jsx)(C.a,{striped:!0,noHeader:!0,dense:!0,data:a,columns:t,onRowClicked:function(e,a){e.delivered?alert("Already delivered"):r.push("/".concat(e.order_id,"/deliver"))}})})));var H=function(e){Object(n.a)(r,e);var a=Object(s.a)(r);function r(){var e;Object(t.a)(this,r);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(e=a.call.apply(a,[this].concat(n))).state={phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",showDelivered:!1},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,a=e.onUpdateOrdersData,r=e.driver;Object(y.a)(r.id).then((function(e){a(e.data)}))}},{key:"render",value:function(){var e=this,a=!0,r=[],t=this.state,l=t.selectedArea,n=t.selectedHub,s=t.selectedSubarea,c=t.phone,d=t.showDelivered,o=this.props,u=o.customers,y=o.locations,g=o.areas,w=o.subareas,A=o.hubs;if("all"!==n){var C=y.get(n);g=(g=Array.from(C.keys())).sort((function(e,a){return e.localeCompare(a)}));var S="all"!==l?[C.get(l)]:Array.from(C.values());w=[],S.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,a){return e.localeCompare(a)}))}if("all"!==l){var D=new Map;Array.from(y.keys()).forEach((function(e){y.get(e).has(l)&&(D=y.get(e))}));var H=[D.get(l)];w=[],H.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,a){return e.localeCompare(a)}))}return u&&(a=!1,r=(r=(r=Array.from(u.values())).filter((function(e){return("all"===n||e.address.hub===n)&&(("all"===l||e.address.area===l)&&(("all"===s||e.address.subarea===s)&&(!c||(-1!==e.phone.indexOf(c)||-1!==e.name.toLowerCase().indexOf(c.toLowerCase())))))}))).filter((function(e){return d?!!e.delivery.deliver_date:!e.delivery.deliver_date}))),Object(i.jsx)("div",{children:a?Object(i.jsx)(m.a,{}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"flex middle",style:{padding:10},children:[Object(i.jsx)("div",{style:{marginRight:20},children:Object(i.jsx)(x.a,{value:c,label:"Phone or Name",onChange:function(a){return e.setState({phone:a.target.value})}})}),Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"hub-filter",children:"Hub"}),Object(i.jsxs)(h.a,{labelId:"hub-filter",style:{width:160},value:n,onChange:function(a){var r=a.target.value;e.setState({selectedHub:r,selectedArea:"all",selectedSubarea:"all"})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),A.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})})]}),Object(i.jsxs)("div",{className:"flex middle",style:{padding:10},children:[Object(i.jsx)("div",{style:{marginRight:20},children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"area-filter",children:"Area"}),Object(i.jsxs)(h.a,{labelId:"area-filter",style:{width:150},value:l,onChange:function(a){var r=a.target.value;e.setState({selectedArea:r,selectedSubarea:"all"})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),g.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"subarea-filter",children:"Subareas"}),Object(i.jsxs)(h.a,{labelId:"subarea-filter",style:{width:150},value:s,onChange:function(a,r){var t=a.target.value;e.setState({selectedSubarea:t})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),w.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})})]}),Object(i.jsxs)("div",{className:"flex space-bw",style:{padding:10},children:[Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{control:Object(i.jsx)(O.a,{checked:d,onChange:function(a,r){return e.setState({showDelivered:r})},color:"primary"}),label:"Delivered"})}),Object(i.jsx)("div",{children:Object(i.jsx)(p.a,{color:"primary",onClick:function(){e.setState({phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",selectedDriver:"all",showWithoutDairy:!1})},children:"Clear All Filters"})})]}),Object(i.jsx)(k,{data:r})]})})}}]),r}(d.Component);a.default=Object(u.b)((function(e){var a=e.setDriver;return Object(c.a)({},a)}),(function(e){return{onUpdateOrdersData:function(a){return e(Object(g.b)(a))}}}))(H)}}]);
//# sourceMappingURL=14.e3bd1ce6.chunk.js.map