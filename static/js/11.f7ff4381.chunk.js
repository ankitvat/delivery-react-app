(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[11],{112:function(t,e,r){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export.csv",r=document.createElement("a"),n=[];t.forEach((function(t){t=t.join(","),n.push(t)}));var c=n.join("\n");null!=c&&(c.match(/^data:text\/csv/i)||(c="data:text/csv;charset=utf-8,".concat(c)),r.setAttribute("href",encodeURI(c)),r.setAttribute("download",e),r.click())}},114:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(44);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,c=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(s){c=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(c)throw a}}return r}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},135:function(t,e,r){"use strict";var n=r(90),c=r(91);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(r(0)),o=(0,n(r(92)).default)(a.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");e.default=o},243:function(t,e,r){"use strict";r.r(e);var n=r(114),c=r(88),a=r(89),o=r(95),i=r(94),s=r(10),u=r(4),l=r(0),d=r(37),h=r(134),b=r.n(h),f=r(136),j=r.n(f),m=r(233),v=r(135),p=r.n(v),O=r(112),y=r(67),x=r(109),w=r(117),g=r(39);var C=function(t){Object(o.a)(r,t);var e=Object(i.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).updateState=function(t){a.setState({selectedRows:t.selectedRows})},a.createCrateNumbers=function(){a.setState({creatingCrate:!0});var t=a.props.customers,e=[];t.forEach((function(t){var r=t.order_id,n=t.crateId;e.push({order_id:r,crate_id:n})})),Object(w.e)({orderCrateIds:e}).then((function(t){window.location.reload()}))},a.columns=[{name:"Crate",selector:"crate_id",sortable:!0,width:"90px"},{name:"Order Id",selector:"order_id",sortable:!0,width:"90px"},{name:"Hub",sortable:!0,width:"100px",cell:function(t,e){return t.address.hub}},{name:"Name",selector:"name",sortable:!0,width:"200px"},{name:"Phone",selector:"phone",sortable:!0,width:"140px"},{name:"Product",selector:"products",sortable:!1,cell:function(t,e){var r=t.products,c=t.phone,a=Object.entries(r),o=[];return a.forEach((function(t){var e=Object(n.a)(t,2),r=e[0],c=e[1];"Dairy"!==r&&c.forEach((function(t){return o.push(t)}))})),Object(u.jsxs)("table",{style:{width:"100%",textAlign:"left"},id:"customer-sheet-table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Total"}),Object(u.jsx)("th",{children:"Qty"})]})}),Object(u.jsx)("tbody",{children:o.map((function(t){var e=t.product_id,r=t.total,n=t.unit,a=t.quantity,o=t.product;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:o}),Object(u.jsxs)("td",{className:"fixed-width-column",children:[r," ",n]}),Object(u.jsx)("td",{className:"fixed-width-column",children:a})]},c.toString()+e.toString())}))})]})}}],a.exportData=function(){var t=a.props.customers,e=Array.from(t.values());e=e.filter((function(t){return!1===t.onlyDairy}));var r=[["Crate","Hub","Name","Phone","Address","Product","Category","Total","Qty"]];e.forEach((function(t){var e=t.products,c=t.phone,a=t.address,o=a.house_number,i=a.subarea,s=a.area,u=a.hub,l='"'.concat(o,", ").concat(i,", ").concat(s,'"'),d=Object.entries(e),h=[];d.forEach((function(t){var e=Object(n.a)(t,2),r=e[0],c=e[1];"Dairy"!==r&&c.forEach((function(t){t.category=r,h.push(t)}))})),h.forEach((function(e,n){var a=e.total,o=e.unit,i=e.quantity,s=e.category;if(console.log(e),0===n){var d=[t.crate_id,"".concat(u),"".concat(t.name),"".concat(c),l,'"'.concat(e.product,'"'),"".concat(s),"".concat(a," ").concat(o),"".concat(i)];r.push(d)}else{var h=["","","","","",'"'.concat(e.product,'"'),"".concat(s),"".concat(a," ").concat(o),"".concat(i)];r.push(h)}}))})),Object(O.a)(r,"Customer Sheet - ".concat((new Date).toLocaleDateString(),".csv"))},a.state={loading:!0},a}return Object(a.a)(r,[{key:"render",value:function(){var t=!0,e=this.props.customers,r=this.state.creatingCrate,n=[];return e&&(t=!1,console.log(e),n=(n=Array.from(e.values())).filter((function(t){return!1===t.onlyDairy}))),Object(u.jsx)("div",{children:t?Object(u.jsx)(g.a,{}):Object(u.jsx)("div",{id:"customer-sheet-table",children:Object(u.jsx)(b.a,{data:n,columns:this.columns,sortIcon:Object(u.jsx)(p.a,{}),actions:Object(u.jsxs)("div",{children:[Object(u.jsx)(m.a,{variant:"outlined",color:"primary",startIcon:r?Object(u.jsx)(y.a,{size:12}):null,disabled:r,style:{marginRight:4},onClick:this.createCrateNumbers,children:"Create Crate Numbers"}),Object(u.jsx)(m.a,{startIcon:Object(u.jsx)(j.a,{}),color:"secondary",variant:"outlined",onClick:this.exportData,children:"Download Excel"})]})})})})}}]),r}(l.Component);e.default=Object(d.b)((function(t){var e=t.setAdmin;return Object(s.a)({},e)}),(function(t){return{onUpdateOrdersData:function(e){return t(Object(x.c)(e))}}}))(C)}}]);
//# sourceMappingURL=11.f7ff4381.chunk.js.map