(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[13],{224:function(e,t,r){"use strict";r.r(t);var a=r(43),l=r(92),n=r(93),s=r(95),c=r(94),i=r(10),d=r(4),o=r(0),u=r.n(o),h=r(38),b=r(217),j=r(228),v=r(178),f=r(210),O=r(214),x=r(229),m=r(225),p=r(203),y=r(204),g=r(39),w=r(110),S=r.n(w);function A(e){var t=e.data,r=e.onSelectionChange,a=e.deliveryBoys,l=[{name:"Crate",selector:"crateId",sortable:!0,width:"70px"},{name:"Name",selector:"name",sortable:!0,width:"200px"},{name:"Phone",selector:"phone",sortable:!0,width:"140px"},{name:"Hub",sortable:!0,selector:"address.hub",width:"100px",cell:function(e,t){return e.address.hub}},{name:"Region",sortable:!0,selector:"address.area",width:"140px",cell:function(e,t){return e.address.area}},{name:"Locality",sortable:!0,selector:"address.subarea",width:"150px",cell:function(e,t){return e.address.subarea}},{name:"House",selector:"address.house",width:"200px",cell:function(e,t){return e.address.house_number}},{name:"Gable Top",selector:"gable-top",width:"80px",cell:function(e,t){var r=e.products;if("Dairy"in r){var a=r.Dairy,l=0;return a.forEach((function(e){811===e.product_id&&(l+=e.quantity)})),l||""}return""}},{name:"Paneer",selector:"paneer",width:"80px",cell:function(e,t){var r=e.products;if("Dairy"in r){var a=r.Dairy,l=0;return a.forEach((function(e){225===e.product_id&&(l+=e.total)})),l?l+"g":""}return""}},{name:"Driver",selector:"_driver",cell:function(e,t){var r=e.delivery_person_id;if(r){var l=a.get(r);return l?l.name:""}return""}}];return console.log("Rerendering Table"),Object(d.jsx)(S.a,{striped:!0,noHeader:!0,selectableRows:!0,onSelectedRowsChange:r,dense:!0,data:t,columns:l})}var C=u.a.memo(A),D=r(113),R=r(99);function _(e){var t=e.setAdmin;return Object(i.a)({},t)}var k=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).hideAddress=function(){return a.setState({hiddenAddress:!0})},a.state={loading:!0,phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",selectedDriver:"all",showWithoutDairy:!1,hiddenAddress:!1,selectedRow:[]},a}return Object(n.a)(r,[{key:"render",value:function(){var e=this,t=!0,r=this.state,a=r.selectedArea,l=r.selectedHub,n=r.selectedSubarea,s=r.selectedDriver,c=r.showWithoutDairy,i=r.phone,o=this.props,u=o.customers,h=o.locations,y=o.areas,w=o.subareas,S=o.hubs,A=o.deliveryBoys,C=A?Array.from(A.values()):[];if("all"!==l){var D=h.get(l);y=(y=Array.from(D.keys())).sort((function(e,t){return e.localeCompare(t)}));var R="all"!==a?[D.get(a)]:Array.from(D.values());w=[],R.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,t){return e.localeCompare(t)}))}if("all"!==a){var _=new Map;Array.from(h.keys()).forEach((function(e){h.get(e).has(a)&&(_=h.get(e))}));var k=[_.get(a)];w=[],k.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,t){return e.localeCompare(t)}))}var N=[];return u&&(t=!1,N=(N=Array.from(u.values())).filter((function(e){return("all"===l||e.address.hub===l)&&(("all"===a||e.address.area===a)&&(("all"===n||e.address.subarea===n)&&(("all"===s||e.delivery_person_id===s)&&(c?!!e.hasNoDairy:!i||-1!==e.phone.indexOf(i)))))}))),Object(d.jsx)("div",{children:t?Object(d.jsx)(g.a,{}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"flex middle",style:{padding:10},children:[Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsx)(m.a,{value:i,label:"Phone",onChange:function(t){return e.setState({phone:t.target.value})}})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsxs)(f.a,{children:[Object(d.jsx)(j.a,{id:"hub-filter",children:"Hub"}),Object(d.jsxs)(b.a,{labelId:"hub-filter",style:{width:100},value:l,onChange:function(t){var r=t.target.value;e.setState({selectedHub:r,selectedArea:"all",selectedSubarea:"all"})},children:[Object(d.jsx)(v.a,{value:"all",children:"All"}),S.map((function(e){return Object(d.jsx)(v.a,{value:e,children:e},e)}))]})]})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsxs)(f.a,{children:[Object(d.jsx)(j.a,{id:"area-filter",children:"Area"}),Object(d.jsxs)(b.a,{labelId:"area-filter",style:{width:180},value:a,onChange:function(t){var r=t.target.value;e.setState({selectedArea:r,selectedSubarea:"all"})},children:[Object(d.jsx)(v.a,{value:"all",children:"All"}),y.map((function(e){return Object(d.jsx)(v.a,{value:e,children:e},e)}))]})]})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsxs)(f.a,{children:[Object(d.jsx)(j.a,{id:"subarea-filter",children:"Subareas"}),Object(d.jsxs)(b.a,{labelId:"subarea-filter",style:{width:180},value:n,onChange:function(t,r){var a=t.target.value;e.setState({selectedSubarea:a})},children:[Object(d.jsx)(v.a,{value:"all",children:"All"}),w.map((function(e){return Object(d.jsx)(v.a,{value:e,children:e},e)}))]})]})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsxs)(f.a,{children:[Object(d.jsx)(j.a,{id:"driver-filter",children:"Driver"}),Object(d.jsxs)(b.a,{labelId:"driver-filter",style:{width:200},onChange:function(t,r){var a=t.target.value;e.setState({selectedDriver:a})},children:[Object(d.jsx)(v.a,{value:"all",children:"All"}),C.map((function(e){return Object(d.jsx)(v.a,{value:e.id,children:e.name},"driver-".concat(e.id))}))]})]})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsx)(O.a,{control:Object(d.jsx)(x.a,{checked:c,onChange:function(t,r){return e.setState({showWithoutDairy:r})},color:"primary"}),label:"Show Customers Without Dairy"})}),Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsx)(p.a,{color:"primary",onClick:function(){e.setState({phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",selectedDriver:"all",showWithoutDairy:!1})},children:"Clear All Filters"})})]}),Object(d.jsx)(H,{data:N,deliveryBoys:A})]})})}}]),r}(o.Component),H=Object(h.b)(_,(function(e){return{onUpdateOrdersData:function(t){return e(Object(R.c)(t))}}}))((function(e){var t=e.data,r=e.deliveryBoys,l=e.onUpdateOrdersData,n=Array.from(r.values()),s=Object(o.useState)([]),c=Object(a.a)(s,2),i=c[0],u=c[1],h=Object(o.useCallback)((function(e){e.allSelected,e.selectedCount;var t=e.selectedRows;u(t)}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{}),Object(d.jsxs)("div",{className:"flex right middle",children:[Object(d.jsxs)("div",{className:"p-10",children:[t.length," Rows Filtered"]}),Object(d.jsxs)("div",{className:"p-10",children:[i.length," Rows Selected"]}),Object(d.jsx)("div",{className:"p-10",children:Object(d.jsx)("div",{children:Object(d.jsxs)(f.a,{variant:"outlined",children:[Object(d.jsx)(j.a,{id:"driver-filter",children:"Select Driver"}),Object(d.jsxs)(b.a,{labelId:"driver-filter",style:{width:200},disabled:i.length<1,onChange:function(e){var t={order_ids:i.map((function(e){return e.order_id})),driver:e.target.value};Object(D.a)(t).then((function(e){Object(D.b)().then((function(e){var t=e.data;l(t)})),u([])}))},children:[Object(d.jsx)(v.a,{value:"",children:"None"}),n.map((function(e){return Object(d.jsx)(v.a,{value:e.id,children:e.name},"driver-".concat(e.id))}))]})]})})})]}),Object(d.jsx)(C,{data:t,onSelectionChange:h,deliveryBoys:r})]})}));t.default=Object(h.b)(_)(k)}}]);
//# sourceMappingURL=13.846e2798.chunk.js.map