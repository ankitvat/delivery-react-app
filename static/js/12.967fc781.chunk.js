(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[12],{246:function(e,a,t){"use strict";t.r(a);var r=t(89),l=t(90),n=t(92),s=t(91),c=t(10),i=t(4),d=t(0),o=t.n(d),u=t(37),h=t(237),b=t(251),j=t(195),v=t(231),f=t(187),O=t(188),x=t(248),p=t(224),m=t(39),y=t(132),g=t(130),w=t(2),A=t(117),S=t.n(A),C=t(189),D=t.n(C);var k=o.a.memo(Object(w.f)((function(e){var a=e.data,t=e.history;console.log(t);var r=[{name:"Name",selector:"name",sortable:!0,width:"200px"},{name:"Phone",selector:"phone",sortable:!0,width:"140px",cell:function(e,a){var t=e.phone;return Object(i.jsx)("div",{children:Object(i.jsxs)("a",{href:"tel:+91".concat(t),className:"flex middle",children:[Object(i.jsx)(D.a,{})," ",t]})})}},{name:"Hub",sortable:!0,selector:"address.hub",width:"100px",cell:function(e,a){return e.address.hub}},{name:"Region",sortable:!0,selector:"address.area",width:"140px",cell:function(e,a){return e.address.area}},{name:"Locality",sortable:!0,selector:"address.subarea",width:"150px",cell:function(e,a){return e.address.subarea}},{name:"House",selector:"address.house",width:"200px",cell:function(e,a){return e.address.house_number}}];return console.log("Rerendering Table"),Object(i.jsx)(S.a,{striped:!0,noHeader:!0,dense:!0,data:a,columns:r,onRowClicked:function(e,a){e.delivered?alert("Already delivered"):t.push("/".concat(e.order_id,"/deliver"))}})})));var H=function(e){Object(n.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(r.a)(this,t);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(e=a.call.apply(a,[this].concat(n))).state={phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",showDelivered:!1},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.onUpdateOrdersData,t=e.driver;Object(y.a)(t.id).then((function(e){a(e.data)}))}},{key:"render",value:function(){var e=this,a=!0,t=[],r=this.state,l=r.selectedArea,n=r.selectedHub,s=r.selectedSubarea,c=r.phone,d=r.showDelivered,o=this.props,u=o.customers,y=o.locations,g=o.areas,w=o.subareas,A=o.hubs;if("all"!==n){var S=y.get(n);g=(g=Array.from(S.keys())).sort((function(e,a){return e.localeCompare(a)}));var C="all"!==l?[S.get(l)]:Array.from(S.values());w=[],C.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,a){return e.localeCompare(a)}))}if("all"!==l){var D=new Map;Array.from(y.keys()).forEach((function(e){y.get(e).has(l)&&(D=y.get(e))}));var H=[D.get(l)];w=[],H.forEach((function(e){e.forEach((function(e){return w.push(e)}))})),w=w.sort((function(e,a){return e.localeCompare(a)}))}return u&&(a=!1,t=(t=Array.from(u.values())).filter((function(e){return("all"===n||e.address.hub===n)&&(("all"===l||e.address.area===l)&&(("all"===s||e.address.subarea===s)&&(c?-1!==e.phone.indexOf(c):d?!!e.delivery.deliver_date:!e.delivery.deliver_date)))}))),Object(i.jsx)("div",{children:a?Object(i.jsx)(m.a,{}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"flex middle",style:{padding:10},children:[Object(i.jsx)("div",{style:{marginRight:20},children:Object(i.jsx)(x.a,{value:c,label:"Phone",onChange:function(a){return e.setState({phone:a.target.value})}})}),Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"hub-filter",children:"Hub"}),Object(i.jsxs)(h.a,{labelId:"hub-filter",style:{width:160},value:n,onChange:function(a){var t=a.target.value;e.setState({selectedHub:t,selectedArea:"all",selectedSubarea:"all"})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),A.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})})]}),Object(i.jsxs)("div",{className:"flex middle",style:{padding:10},children:[Object(i.jsx)("div",{style:{marginRight:20},children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"area-filter",children:"Area"}),Object(i.jsxs)(h.a,{labelId:"area-filter",style:{width:150},value:l,onChange:function(a){var t=a.target.value;e.setState({selectedArea:t,selectedSubarea:"all"})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),g.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(b.a,{id:"subarea-filter",children:"Subareas"}),Object(i.jsxs)(h.a,{labelId:"subarea-filter",style:{width:150},value:s,onChange:function(a,t){var r=a.target.value;e.setState({selectedSubarea:r})},children:[Object(i.jsx)(j.a,{value:"all",children:"All"}),w.map((function(e){return Object(i.jsx)(j.a,{value:e,children:e},e)}))]})]})})]}),Object(i.jsxs)("div",{className:"flex space-bw",style:{padding:10},children:[Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{control:Object(i.jsx)(O.a,{checked:d,onChange:function(a,t){return e.setState({showDelivered:t})},color:"primary"}),label:"Delivered"})}),Object(i.jsx)("div",{children:Object(i.jsx)(p.a,{color:"primary",onClick:function(){e.setState({phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",selectedDriver:"all",showWithoutDairy:!1})},children:"Clear All Filters"})})]}),Object(i.jsx)(k,{data:t})]})})}}]),t}(d.Component);a.default=Object(u.b)((function(e){var a=e.setDriver;return Object(c.a)({},a)}),(function(e){return{onUpdateOrdersData:function(a){return e(Object(g.b)(a))}}}))(H)}}]);
//# sourceMappingURL=12.967fc781.chunk.js.map